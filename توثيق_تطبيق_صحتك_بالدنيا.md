# توثيق تطبيق "صحتك بالدنيا"

## المحتويات
1. [نظرة عامة على المشروع](#نظرة-عامة-على-المشروع)
2. [الهيكل والبنية](#الهيكل-والبنية)
3. [المتطلبات الفنية](#المتطلبات-الفنية)
4. [هيكل قاعدة البيانات](#هيكل-قاعدة-البيانات)
5. [تفاصيل الوحدات البرمجية](#تفاصيل-الوحدات-البرمجية)
6. [واجهات المستخدم](#واجهات-المستخدم)
7. [آلية عمل النظام](#آلية-عمل-النظام)
8. [التكامل مع الخدمات الخارجية](#التكامل-مع-الخدمات-الخارجية)
9. [الأمان وخصوصية البيانات](#الأمان-وخصوصية-البيانات)
10. [خطة التوسع المستقبلية](#خطة-التوسع-المستقبلية)

---

## نظرة عامة على المشروع

### فكرة التطبيق
تطبيق "صحتك بالدنيا" هو منصة شاملة للرعاية الصحية الشخصية تهدف إلى مساعدة المستخدمين على إدارة ومراقبة صحتهم بطريقة متكاملة. يجمع التطبيق بين العديد من الوظائف الضرورية في مكان واحد، مما يساعد المستخدم على متابعة حالته الصحية ورفع مستوى الوعي الصحي لديه.

### الأهداف الرئيسية
1. **إدارة البيانات الطبية الشخصية**: تمكين المستخدمين من تخزين ومتابعة سجلاتهم الطبية بما في ذلك الأدوية، الأمراض، الحساسية، والتطعيمات.
2. **متابعة المؤشرات الصحية**: تتبع مؤشرات حيوية مثل الوزن، السعرات الحرارية، ضغط الدم، ومستويات السكر.
3. **التوعية الصحية**: تقديم معلومات تثقيفية حول الغذاء الصحي، الأعشاب الطبية، وأساليب الحياة الصحية.
4. **تحليل نتائج الفحوصات**: توفير أداة لفهم وتحليل نتائج الفحوصات الطبية المختلفة.
5. **الصحة النفسية**: دعم الصحة النفسية من خلال تقييمات وموارد مخصصة.
6. **تنظيم النوم**: مساعدة المستخدمين على تتبع وتحسين جودة النوم.

### الفئة المستهدفة
- الأفراد المهتمون بمتابعة صحتهم الشخصية
- المرضى المصابون بأمراض مزمنة تتطلب متابعة مستمرة
- المهتمون باتباع نمط حياة صحي
- المستخدمون الباحثون عن مرجع شامل للمعلومات الصحية

---

## الهيكل والبنية

### هيكل الملفات
التطبيق مبني بهيكل منظم من الملفات والمجلدات كالتالي:

```
healthy-app/
├── firebase-config.js       # تكوين Firebase للاتصال بقاعدة البيانات
├── index.html               # صفحة البداية للتطبيق
├── login.html               # صفحة تسجيل الدخول
├── main.html                # الصفحة الرئيسية بعد تسجيل الدخول
├── sidebar.html             # شريط القوائم الجانبي المستخدم في عدة صفحات
├── config/                  # ملفات تكوين وإعدادات التطبيق
│   ├── app-config.js        # الإعدادات العامة للتطبيق
│   ├── navigation-fixes.js  # تصحيحات للتنقل بين الصفحات
│   ├── navigation-helpers.js # مساعدات التنقل بين الصفحات
│   └── shared-functions.js  # وظائف مشتركة بين عدة صفحات
├── modules/                 # الوحدات الوظيفية للتطبيق
│   ├── about/               # وحدة معلومات عن التطبيق والمطور
│   ├── calories/            # وحدة حساب وتتبع السعرات الحرارية
│   ├── health-state/        # وحدة متابعة المؤشرات الصحية العامة
│   ├── healthy-recepies/    # وحدة الوصفات الصحية
│   ├── herbs/               # وحدة معلومات الأعشاب الطبية
│   ├── medical-file/        # وحدة إدارة الملف الطبي الشخصي
│   ├── mental-health/       # وحدة الصحة النفسية
│   ├── nutrition/           # وحدة التغذية والنظام الغذائي
│   ├── sleep/               # وحدة تتبع وتحسين النوم
│   └── studies/             # وحدة الدراسات والأبحاث العلمية
└── photo/                   # صور ورسومات التطبيق
```

### الوحدات الوظيفية
التطبيق مقسم إلى وحدات وظيفية متخصصة، حيث كل وحدة مسؤولة عن جانب معين من جوانب الصحة:

1. **الملف الطبي**: إدارة المعلومات الطبية الشخصية
2. **التغذية والسعرات**: متابعة النظام الغذائي وحساب السعرات
3. **الصحة النفسية**: تقييم وتحسين الحالة النفسية
4. **الأعشاب الطبية**: معلومات عن الأعشاب واستخداماتها الطبية
5. **النوم**: متابعة وتحسين جودة النوم
6. **الدراسات العلمية**: أحدث الأبحاث والدراسات الطبية
7. **المؤشرات الصحية**: تتبع المؤشرات الحيوية المختلفة
8. **الوصفات الصحية**: وصفات طعام صحية ومتوازنة

---

## المتطلبات الفنية

### التقنيات المستخدمة
- **واجهة المستخدم**: HTML5, CSS3, JavaScript
- **تخزين البيانات**: Firebase Firestore
- **المصادقة**: Firebase Authentication
- **الواجهة التفاعلية**: Vanilla JavaScript (ES6+) & DOM API
- **التصميم**: CSS المخصص مع نظام المتغيرات للاتساق
- **أيقونات**: Font Awesome

### متطلبات النظام
- **متصفح ويب حديث** يدعم:
  - ES6+ JavaScript
  - CSS Custom Properties (Variables)
  - Flexbox & Grid Layout
  - Fetch API
  - Local Storage
- **اتصال بالإنترنت** لمزامنة البيانات مع Firebase

### الاعتماديات الخارجية
- **Firebase SDK** (v8.10.1):
  - firebase-app.js
  - firebase-auth.js
  - firebase-firestore.js
- **Font Awesome** (v6.4.2) للأيقونات

---

## هيكل قاعدة البيانات

### نموذج البيانات في Firebase Firestore

```
users/
  ├── {userId}/                  # معرف المستخدم (UID)
  │   ├── profile/               # بيانات الملف الشخصي
  │   │   ├── basicInfo          # معلومات أساسية (الاسم، العمر، الجنس، إلخ)
  │   │   ├── allergies          # معلومات الحساسية
  │   │   ├── medications        # الأدوية الحالية
  │   │   ├── conditions         # الحالات المرضية
  │   │   ├── surgeries          # العمليات الجراحية
  │   │   ├── vaccinations       # التطعيمات
  │   │   ├── familyHistory      # التاريخ المرضي للعائلة
  │   │   └── lifestyle          # معلومات نمط الحياة
  │   │
  │   ├── healthMetrics/         # مقاييس صحية
  │   │   ├── weight             # سجلات الوزن مع التاريخ
  │   │   ├── bloodPressure      # سجلات ضغط الدم
  │   │   ├── bloodSugar         # سجلات نسبة السكر في الدم
  │   │   ├── cholesterol        # سجلات مستويات الكوليسترول
  │   │   └── otherMetrics       # مقاييس أخرى مخصصة
  │   │
  │   ├── nutrition/             # بيانات التغذية
  │   │   ├── dailyLogs          # سجلات الوجبات اليومية
  │   │   ├── waterIntake        # سجل استهلاك الماء
  │   │   └── caloriesGoal       # هدف السعرات الحرارية
  │   │
  │   ├── sleep/                 # بيانات النوم
  │   │   ├── sleepLogs          # سجلات النوم اليومية
  │   │   └── sleepGoal          # هدف ساعات النوم
  │   │
  │   └── mentalHealth/          # بيانات الصحة النفسية
  │       ├── assessments        # نتائج التقييمات النفسية
  │       └── moodLogs           # سجلات الحالة المزاجية
  │
  └── {anotherUserId}/
      └── ...
```

### هياكل البيانات الرئيسية

**المعلومات الأساسية (basicInfo)**:
```javascript
{
  fullName: "الاسم الكامل",
  dateOfBirth: "YYYY-MM-DD",
  gender: "ذكر/أنثى",
  bloodType: "A+/B+/AB+/O+/A-/B-/AB-/O-",
  height: "175", // بالسنتيمتر
  weight: "70", // بالكيلوجرام
  email: "example@domain.com",
  phone: "1234567890",
  emergencyContact: "اسم شخص للطوارئ: رقم هاتفه",
  lastUpdated: Timestamp
}
```

**الحساسية (allergies)**:
```javascript
[
  {
    id: "allergy-uuid",
    name: "اسم المسبب للحساسية",
    severity: "منخفضة/متوسطة/عالية",
    symptoms: "وصف الأعراض",
    diagnosis: "تاريخ التشخيص",
    notes: "ملاحظات إضافية",
    timestamp: Timestamp
  },
  // المزيد من سجلات الحساسية
]
```

**الأدوية (medications)**:
```javascript
[
  {
    id: "medication-uuid",
    name: "اسم الدواء",
    dosage: "الجرعة",
    frequency: "التكرار",
    startDate: "YYYY-MM-DD",
    endDate: "YYYY-MM-DD أو مستمر",
    purpose: "سبب الاستخدام",
    prescribedBy: "اسم الطبيب",
    notes: "ملاحظات إضافية",
    timestamp: Timestamp
  },
  // المزيد من سجلات الأدوية
]
```

**الحالات المرضية (conditions)**:
```javascript
[
  {
    id: "condition-uuid",
    name: "اسم المرض أو الحالة",
    diagnosisDate: "YYYY-MM-DD",
    status: "نشط/متعافي/مزمن",
    severity: "منخفضة/متوسطة/عالية",
    treatment: "العلاج الحالي",
    specialist: "الطبيب المختص",
    notes: "ملاحظات إضافية",
    timestamp: Timestamp
  },
  // المزيد من الحالات المرضية
]
```

---

## تفاصيل الوحدات البرمجية

### 1. وحدة المصادقة وإدارة المستخدمين

#### الوظائف الرئيسية:
- تسجيل المستخدمين الجدد
- تسجيل الدخول والخروج
- استعادة كلمة المرور
- تحديث معلومات الملف الشخصي

#### الملفات المرتبطة:
- `login.html` - واجهة تسجيل الدخول
- `firebase-config.js` - تكوين Firebase ووظائف المصادقة

#### عينة كود المصادقة:
```javascript
// تسجيل الدخول
function login(email, password) {
  return firebase.auth().signInWithEmailAndPassword(email, password)
    .then((userCredential) => {
      // المستخدم سجل دخوله بنجاح
      return userCredential.user;
    })
    .catch((error) => {
      // معالجة الأخطاء
      console.error("خطأ في تسجيل الدخول:", error.message);
      throw error;
    });
}

// تسجيل مستخدم جديد
function register(email, password, displayName) {
  return firebase.auth().createUserWithEmailAndPassword(email, password)
    .then((userCredential) => {
      // إنشاء ملف شخصي أولي للمستخدم
      const user = userCredential.user;
      return firebase.firestore().collection("users").doc(user.uid).set({
        profile: {
          basicInfo: {
            fullName: displayName,
            email: email,
            dateCreated: firebase.firestore.FieldValue.serverTimestamp()
          }
        }
      }).then(() => {
        return user;
      });
    })
    .catch((error) => {
      console.error("خطأ في إنشاء حساب:", error.message);
      throw error;
    });
}

// استعادة كلمة المرور
function resetPassword(email) {
  return firebase.auth().sendPasswordResetEmail(email)
    .then(() => {
      // تم إرسال رابط إعادة تعيين كلمة المرور
      return true;
    })
    .catch((error) => {
      console.error("خطأ في إرسال رابط استعادة كلمة المرور:", error.message);
      throw error;
    });
}
```

### 2. وحدة الملف الطبي

#### الوظائف الرئيسية:
- عرض وتحديث المعلومات الأساسية
- إضافة وتعديل وحذف سجلات الحساسية
- إضافة وتعديل وحذف سجلات الأدوية
- إضافة وتعديل وحذف سجلات الحالات المرضية
- إضافة وتعديل وحذف سجلات العمليات الجراحية
- إضافة وتعديل وحذف سجلات التطعيمات
- إضافة وتعديل وحذف سجلات التاريخ المرضي للعائلة
- إنشاء تقارير طبية قابلة للطباعة والمشاركة

#### الملفات المرتبطة:
- `modules/medical-file/medical-profile.html` - الصفحة الرئيسية للملف الطبي
- `modules/medical-file/medical-profile.css` - أنماط الملف الطبي
- `modules/medical-file/medical-tests.html` - صفحة إدارة الفحوصات الطبية
- `modules/medical-file/medical-report.html` - صفحة التقرير الطبي

#### عينة كود إدارة الملف الطبي:
```javascript
// حفظ معلومات أساسية جديدة
function saveBasicInfo(basicInfo) {
  const user = firebase.auth().currentUser;
  if (!user) return Promise.reject("المستخدم غير مسجل الدخول");
  
  return firebase.firestore().collection("users").doc(user.uid)
    .set({
      profile: {
        basicInfo: {
          ...basicInfo,
          lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
        }
      }
    }, { merge: true });
}

// إضافة حساسية جديدة
function addAllergy(allergyData) {
  const user = firebase.auth().currentUser;
  if (!user) return Promise.reject("المستخدم غير مسجل الدخول");
  
  const allergy = {
    id: generateUniqueId(),
    ...allergyData,
    timestamp: firebase.firestore.FieldValue.serverTimestamp()
  };
  
  return firebase.firestore().collection("users").doc(user.uid)
    .collection("profile").doc("allergies")
    .set({
      items: firebase.firestore.FieldValue.arrayUnion(allergy)
    }, { merge: true });
}

// الحصول على سجلات الحساسية
function getAllergies() {
  const user = firebase.auth().currentUser;
  if (!user) return Promise.reject("المستخدم غير مسجل الدخول");
  
  return firebase.firestore().collection("users").doc(user.uid)
    .collection("profile").doc("allergies")
    .get()
    .then((doc) => {
      if (doc.exists) {
        return doc.data().items || [];
      }
      return [];
    });
}
```

### 3. وحدة التغذية والسعرات الحرارية

#### الوظائف الرئيسية:
- حساب احتياج السعرات الحرارية اليومية
- تتبع استهلاك السعرات الحرارية
- إدارة الوجبات والمكونات الغذائية
- تحليل المدخول الغذائي
- التوصيات الغذائية

#### الملفات المرتبطة:
- `modules/nutrition/index.html` - الصفحة الرئيسية للتغذية
- `modules/calories/calories.html` - حاسبة السعرات الحرارية
- `modules/calories/calories-app.js` - منطق حساب السعرات
- `modules/nutrition/NutritionApp.js` - تطبيق متابعة التغذية

#### عينة كود حساب السعرات الحرارية:
```javascript
// حساب معدل الأيض الأساسي (BMR) باستخدام معادلة Mifflin-St Jeor
function calculateBMR(weight, height, age, gender) {
  if (gender === 'male') {
    return 10 * weight + 6.25 * height - 5 * age + 5;
  } else {
    return 10 * weight + 6.25 * height - 5 * age - 161;
  }
}

// حساب إجمالي السعرات الحرارية اليومية بناءً على مستوى النشاط
function calculateTDEE(bmr, activityLevel) {
  const activityMultipliers = {
    sedentary: 1.2,      // قليل الحركة
    lightlyActive: 1.375, // نشاط خفيف
    moderatelyActive: 1.55, // نشاط معتدل
    veryActive: 1.725,    // نشاط عالي
    extraActive: 1.9      // نشاط مرتفع جدًا
  };
  
  return Math.round(bmr * activityMultipliers[activityLevel]);
}

// حساب السعرات المطلوبة بناءً على الهدف
function calculateCalorieGoal(tdee, goal, rate) {
  switch(goal) {
    case 'lose':
      return Math.round(tdee - (rate * 500)); // خسارة الوزن (كل 500 سعر = نحو 0.5 كجم/أسبوع)
    case 'gain':
      return Math.round(tdee + (rate * 500)); // زيادة الوزن
    default:
      return tdee; // الحفاظ على الوزن
  }
}
```

### 4. وحدة الصحة النفسية

#### الوظائف الرئيسية:
- تقييمات للحالة النفسية
- أدوات لتخفيف التوتر والقلق
- تتبع الحالة المزاجية
- موارد تثقيفية حول الصحة النفسية

#### الملفات المرتبطة:
- `modules/mental-health/mental-health.html` - الصفحة الرئيسية
- `modules/mental-health/assessment.html` - صفحة تقييم الصحة النفسية
- `modules/mental-health/assessment-data.js` - بيانات استبيانات التقييم

#### عينة كود تقييم الحالة النفسية:
```javascript
// تحليل نتائج تقييم الاكتئاب (PHQ-9)
function analyzePHQ9Score(score) {
  let severity, recommendation;
  
  if (score >= 0 && score <= 4) {
    severity = "الحد الأدنى أو عدم وجود أعراض";
    recommendation = "لا يلزم علاج في هذه المرحلة، لكن استمر في مراقبة الأعراض";
  } else if (score >= 5 && score <= 9) {
    severity = "أعراض اكتئاب خفيفة";
    recommendation = "مراقبة وإعادة التقييم، يمكن الاستفادة من العلاج النفسي";
  } else if (score >= 10 && score <= 14) {
    severity = "أعراض اكتئاب متوسطة";
    recommendation = "يُنصح بالعلاج النفسي أو العلاج الدوائي أو كلاهما";
  } else if (score >= 15 && score <= 19) {
    severity = "أعراض اكتئاب متوسطة إلى شديدة";
    recommendation = "يُنصح بالعلاج الدوائي والعلاج النفسي";
  } else if (score >= 20) {
    severity = "أعراض اكتئاب شديدة";
    recommendation = "مراجعة الطبيب فورًا، يُنصح بالعلاج الدوائي المكثف مع العلاج النفسي";
  }
  
  return {
    score,
    severity,
    recommendation
  };
}

// حفظ نتائج التقييم
function saveAssessmentResult(assessmentType, result) {
  const user = firebase.auth().currentUser;
  if (!user) return Promise.reject("المستخدم غير مسجل الدخول");
  
  const assessmentData = {
    type: assessmentType,
    score: result.score,
    severity: result.severity,
    recommendation: result.recommendation,
    date: firebase.firestore.FieldValue.serverTimestamp()
  };
  
  return firebase.firestore().collection("users").doc(user.uid)
    .collection("mentalHealth").doc("assessments")
    .set({
      results: firebase.firestore.FieldValue.arrayUnion(assessmentData)
    }, { merge: true });
}
```

---

## واجهات المستخدم

### 1. الواجهة الرئيسية
تتألف الواجهة الرئيسية من:
- شريط جانبي للتنقل بين الوحدات
- منطقة عرض رئيسية متغيرة حسب الوحدة النشطة
- شريط علوي يحتوي على معلومات المستخدم وإمكانية تسجيل الخروج

### 2. واجهة الملف الطبي
- عرض البطاقات المختلفة للمعلومات الطبية
- نوافذ منبثقة لإدخال وتعديل المعلومات
- عرض التاريخ الطبي بشكل منظم وبصري

### 3. واجهة التغذية والسعرات
- حاسبة السعرات الحرارية مع رسوم بيانية
- أداة إدخال الوجبات والأطعمة
- عرض تقارير التغذية والتقدم

### 4. واجهة الصحة النفسية
- استبيانات تقييم الحالة النفسية
- عرض النتائج والتوصيات
- موارد وأدوات المساعدة الذاتية

### 5. واجهة النوم
- أداة تتبع النوم
- تقارير جودة النوم
- نصائح وإرشادات لتحسين النوم

### المكونات المشتركة
- **أزرار التنقل**: موحدة عبر جميع الصفحات
- **النوافذ المنبثقة**: نمط موحد للإدخال والتعديل
- **الرسائل التنبيهية**: نظام إشعارات موحد للنجاح والفشل

### أنماط التصميم (CSS)
يعتمد التطبيق على نظام متغيرات CSS للحفاظ على اتساق المظهر:
```css
:root {
  /* الألوان الأساسية */
  --primary-color: #388e3c;
  --primary-dark: #00600f;
  --primary-light: #6abf69;
  --primary-rgb: 56, 142, 60;
  
  /* ألوان النص */
  --text-dark: #333;
  --text-light: #fff;
  --text-muted: #6c757d;
  --text-body: #212529;
  
  /* الخلفيات */
  --bg-body: #f8f9fa;
  --bg-card: #ffffff;
  
  /* الحدود */
  --border-light: #e9ecef;
  --border-width-sm: 1px;
  --border-width-md: 2px;
  
  /* الزوايا المدورة */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 16px;
  
  /* المسافات */
  --space-xs: 8px;
  --space-sm: 16px;
  --space-md: 24px;
  --space-lg: 32px;
  
  /* الخط */
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.875rem;
  --font-size-md: 1rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.25rem;
  --font-size-xxl: 1.5rem;
  
  /* الانتقالات */
  --transition-normal: all 0.2s ease-in-out;
}
```

---

## آلية عمل النظام

### 1. تدفق المستخدم
1. المستخدم يسجل دخوله أو ينشئ حسابًا جديدًا
2. ينتقل إلى الصفحة الرئيسية حيث يمكنه اختيار إحدى الوحدات
3. يدخل بيانات في الوحدة المختارة (ملف طبي، تغذية، إلخ)
4. البيانات تُحفظ في Firebase وتُعرض للمستخدم عند زيارات لاحقة

### 2. إدارة حالة التطبيق
- يعتمد التطبيق على Firebase لتخزين الحالة الدائمة
- تُستخدم localStorage للبيانات المؤقتة والتفضيلات
- تتم مزامنة البيانات عند اتصال المستخدم بالإنترنت

### 3. معالجة البيانات
- **القراءة**: استعلامات Firestore لجلب بيانات المستخدم الشخصية
- **الكتابة**: تحديثات الوثائق في Firestore لحفظ تغييرات المستخدم
- **المعالجة المحلية**: حسابات وتحليلات على جانب العميل (مثل حسابات السعرات)

### 4. التنقل بين الصفحات
تنقل المستخدم يتم من خلال:
1. الشريط الجانبي للوحدات الرئيسية
2. أزرار التنقل داخل كل وحدة
3. الروابط المضمنة في المحتوى

```javascript
// نظام التنقل الموحد
function navigateTo(pagePath) {
  // الحفاظ على معلومات الجلسة
  sessionStorage.setItem('lastPage', window.location.pathname);
  
  // التنقل إلى الصفحة المطلوبة
  window.location.href = pagePath;
}

// مساعد للحصول على مسار الصفحة
function getPagePath(pageName) {
  const pathMap = {
    'main': '../main.html',
    'medical-profile': '../modules/medical-file/medical-profile.html',
    'nutrition': '../modules/nutrition/index.html',
    'mental-health': '../modules/mental-health/mental-health.html',
    // ... المزيد من الصفحات
  };
  
  return pathMap[pageName] || '#';
}
```

---

## التكامل مع الخدمات الخارجية

### 1. Firebase
- **المصادقة**: تسجيل دخول المستخدمين وإدارة الحسابات
- **Firestore**: تخزين بيانات المستخدمين ومزامنتها
- **Storage**: تخزين الملفات مثل صور التقارير الطبية

```javascript
// تكوين Firebase
const firebaseConfig = {
  apiKey: "API_KEY",
  authDomain: "your-app.firebaseapp.com",
  projectId: "your-app-id",
  storageBucket: "your-app.appspot.com",
  messagingSenderId: "SENDER_ID",
  appId: "APP_ID"
};

// تهيئة Firebase
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const auth = firebase.auth();
const storage = firebase.storage();
```

### 2. واجهات برمجة التطبيقات الخارجية
يمكن للتطبيق التكامل مع APIs خارجية لتوسيع وظائفه:

- **قواعد بيانات الأغذية**: للحصول على معلومات تغذية دقيقة
- **خدمات الخرائط**: لتحديد مواقع المستشفيات والصيدليات القريبة
- **مزودي معلومات الأدوية**: للحصول على معلومات محدثة عن الأدوية

```javascript
// مثال على استدعاء API خارجية للحصول على معلومات غذائية
async function getNutritionInfo(foodName) {
  const apiKey = 'YOUR_API_KEY';
  const url = `https://api.nutritionix.com/v1_1/search/${encodeURIComponent(foodName)}?results=0:1&fields=item_name,nf_calories,nf_protein,nf_total_carbohydrate,nf_total_fat&appId=${appId}&appKey=${apiKey}`;
  
  try {
    const response = await fetch(url);
    const data = await response.json();
    return data.hits[0]?.fields || null;
  } catch (error) {
    console.error('خطأ في الحصول على المعلومات الغذائية:', error);
    return null;
  }
}
```

---

## الأمان وخصوصية البيانات

### 1. استراتيجية الأمان

- **مصادقة المستخدمين**: التحقق من هوية المستخدمين قبل الوصول إلى البيانات
- **قواعد أمان Firestore**: ضمان وصول المستخدمين فقط إلى بياناتهم الخاصة
- **تشفير البيانات**: حماية البيانات الحساسة أثناء النقل والتخزين
- **صلاحيات محدودة**: منح أقل امتيازات ممكنة للوظائف

### 2. قواعد أمان Firestore
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // قواعد المستخدمين
    match /users/{userId} {
      // السماح للمستخدم بقراءة وكتابة بياناته الخاصة فقط
      allow read, write: if request.auth != null && request.auth.uid == userId;
      
      // قواعد الملف الشخصي
      match /profile/{document=**} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
      
      // قواعد المقاييس الصحية
      match /healthMetrics/{document=**} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
      
      // قواعد التغذية
      match /nutrition/{document=**} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
    }
  }
}
```

### 3. خصوصية البيانات
- **تحكم المستخدم**: المستخدم لديه سيطرة كاملة على بياناته
- **الحق في الحذف**: إمكانية حذف الحساب وجميع البيانات المرتبطة به
- **سياسة الخصوصية**: توضيح كيفية استخدام البيانات وتخزينها ومشاركتها

---

## خطة التوسع المستقبلية

### 1. ميزات مستقبلية مخطط لها

- **تطبيق الهاتف المحمول**: تطوير إصدارات iOS وAndroid باستخدام Flutter
- **الترجمة**: دعم لغات إضافية غير العربية
- **التكامل مع الأجهزة القابلة للارتداء**: مثل ساعات Apple Watch و Fitbit
- **تحليل متقدم للبيانات**: استخدام الذكاء الاصطناعي لتقديم توصيات مخصصة
- **المجتمع والدعم**: منتدى للمستخدمين لمشاركة الخبرات والنصائح

### 2. تحسينات فنية مستقبلية

- **تحويل إلى PWA**: تحويل التطبيق إلى تطبيق ويب تقدمي للعمل دون اتصال
- **تحسين الأداء**: تبني تقنيات مثل Web Workers للعمليات الثقيلة
- **الوضع المظلم**: إضافة سمة داكنة للتطبيق
- **تجربة مستخدم محسنة**: إضافة رسومات متحركة وانتقالات سلسة

### 3. خارطة الطريق

**المرحلة 1 (الإصدار الحالي):**
- الوظائف الأساسية للملف الطبي وتتبع المؤشرات الصحية
- دعم المتصفحات على سطح المكتب والأجهزة المحمولة
- تكامل أساسي مع Firebase

**المرحلة 2 (الربع القادم):**
- تحسين واجهة المستخدم وتجربة الاستخدام
- إضافة وحدات جديدة (مثل تتبع التمارين الرياضية)
- تكامل مع APIs إضافية للمعلومات الصحية

**المرحلة 3 (النصف الثاني من العام):**
- إطلاق تطبيق الهاتف المحمول
- إضافة ميزات اجتماعية مثل مشاركة التقدم مع الأطباء
- تكامل مع أجهزة الصحة القابلة للارتداء

---

## الخلاصة

تطبيق "صحتك بالدنيا" هو منصة شاملة لإدارة الصحة الشخصية، مصممة لتلبية احتياجات المستخدمين الراغبين في متابعة وتحسين صحتهم بطريقة منظمة ومتكاملة. يجمع التطبيق بين العديد من الوظائف الضرورية في مكان واحد، مدعومًا بواجهة مستخدم سهلة الاستخدام وبنية تقنية قوية.

مع التركيز على خصوصية البيانات والأمان، يوفر التطبيق للمستخدمين طريقة آمنة لتخزين وإدارة معلوماتهم الصحية الحساسة، مع إمكانية الوصول إليها من أي مكان.

خطة التطوير المستقبلية تضمن أن يظل التطبيق محدثًا ومتوافقًا مع أحدث التقنيات والممارسات في مجال الرعاية الصحية الرقمية، مع الاستمرار في تقديم قيمة متزايدة للمستخدمين.

---

## الملاحظات الفنية للمطورين

1. **التوافق مع المتصفحات**: التطبيق مصمم للعمل مع المتصفحات الحديثة (Chrome 60+, Firefox 60+, Safari 12+, Edge 79+)
2. **الخطوط المستخدمة**: يستخدم التطبيق الخط "Cairo" كخط افتراضي للغة العربية
3. **تنسيق التاريخ**: يتم عرض التواريخ بصيغة "DD/MM/YYYY" لملاءمة التفضيلات العربية
4. **التعامل مع اللغة العربية**: يتم التعامل مع اتجاه النص من اليمين إلى اليسار (RTL)
5. **اختبارات الوحدة**: تغطية اختبارات الوحدة لجميع الوظائف الأساسية
6. **تسمية المتغيرات**: اتباع أسلوب camelCase للمتغيرات والوظائف